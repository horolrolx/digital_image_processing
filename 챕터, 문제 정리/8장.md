# 영상의 모폴로지 기법
- 팽창 : cv2.dilate(src, kernel, iteration = N)
- 침식 : cv2.erode(src, kernel, iteration = N)
- 열림 : cv2.morphologyEx(src, cv2.MORPH_OPEN, kernel)
- 닫힘 : cv2.morphologyEx(src, cv2.MORPH_CLOSE, kernel)

- src : 입력영상, kernel : 팽창, 침식, 열림, 닫힘에 사용되는 커널 (또는 마스크), iteration : 연산의 반복횟수, N : 반복

# 모폴로지 연산자
- 이진(혹은 그레이) 영상과 구조 요소(structuring element)를 입력으로 받고 연산 집합(교집합, 합집합, 포함, 여집합)을 이용하여 둘을 결합하는 방법을 말함
- 이진 영상에서의 모폴로지 연산은 전경의 형태적 처리에 이용되지만 그레이 영상에서는 잡음의 제거나 영상의 밝기를 변하시키는데 사용 됨
- 모폴로지 연산자는 크게 기본연산자(basic operator)와 보다 정교연산자(sophisticated operator)로 나누어 짐

# 기본 연산자(basic operator)
- 구조 요소의 값이 전경(foreground : 1로 표시되는 영역과 고려 안함(don't care : 아무것도 표시되지 않는 영역)으로 이루어짐

# 정교 연산자(sophisticated operator)
- 전경과 고려안함 뿐만 아니라 배경(background : 0으로 표시되는 영역) 또한 포함하고 있음


# 팽창(Dilation) 연산
- 수학적 모폴로지(mathematical morphology)에 쓰이는 대표적인 기본 연산 중 하나에 해당함
- 전경 영역을 테두리의 외각 방향으로 확장 시킴

# 팽창 연산 적용의 예
- 객체 영역(흰색)이 점점 불어남
- 객체 내부의 홀(구멍)이 메워짐

# 침식(Erosion) 연산
- 팽창 연산과 더불어 수학적 모폴로지(mathematical morphology)에 쓰이는 두 가지 기본 연산 중 하나에 해당함
- 전경 영역을 테두리에서부터 내부 방향으로 침식시키는 역할을 함

# 침식 연산 적용의 예
- 객체들의 경계가 침식되어 세선화
- 가로 방향으로의 가는 선분들이 제거
- 구조 요소에 따른 침식의 강도가 다소 낮기 때문에, 전체적인 객체의 구조가 상대적으로 잘 보존됨
- 구조요소 보다 더 작은 부분을 잡음으로 보고, 그렇지 않은 부분은 형태의 주요 요소로 보고, 그 형태를 유지

# 열림(Opening) 연산
- 침식 연산과 같이 전경 영역을 깎아내기 위하여 사용
- 단순히 깎아내는 침식 연산과는 다르게 구조 요소와 유사한 형태의 전경을 선택적으로 보존하면서 나머지 부분을 깎아내는데 사용함
- (노이즈를 제거하기 위해 침식. 침식 후 팽창)
- 열림 연산의 결과 전경의 테두리가 구조 요소의 특징에 따라 변화됨
- 열림 연산의 결과로 새롭게 얻어진 전경의 테두리는 열림 연산을 반복적으로 적용하여도 변하지 않는 것을 확인할 수 있는데 이것을 멱등성(idernpotence)이라 함
- 돌출 부분 제거 및 좁은 연결 끊음 >> 영상의 외곽선을 부드럽게 (연산을 반복적용하면 더 부드러워짐)
- 물체의 형상과 크기는 보존

# 그레이 영상에 대한 열림 연산 결과
- 아주 밝은 부분의 밝기를 보존하면서 전체 밝기를 감소

# 열림 연산의 특징
- 입력 영상에 대하여 동일한 구조 요소를 이용한 침식과 팽창을 수행
- 결과 영상에서의 객체의 크기(면적)이 유사하게 유지 됨
- 가는 선이 제거되거나, 약한 연결을 끊어내는 역할을 수행
- 애플리케이션에 따라서, 객체를 구분하는데 있어 불필요한 이상치(outlier), 잡음 등에 의하여 발생되는 작은 객체를 제거하는 데에 응용 가능

# 닫힘(Closing) 연산
- 영역의 외부에는 변화가 없지만 내부 영역은 구조 요소에 따라 채워진 결과를 가짐
- 비어있는 공간을 채우기 위해 팽창 후 침식
- 닫힘 연산과 열림 연산과의 관계를 살펴보면 전경에 대한 열림 연산의 결과는 배경에 대한 닫힘 연산 결과와 동일한데 이것을 열림 연산과 닫힘 연산의 쌍대성(duality)라고 함
- 팽창연산 후 침식연산을 사용하는 알고리즘
- 오목하게 들어가 부분이나 작은 구멍을 채움 >> 영상의 외곽선 부분을 부드럽게. 객체의 형태와 크기는 보존. 닫힘 연산의 성질

# 그레이 영상에 대한 닫힘 연산 결과
- 어두운 부분을 보존하면서 전체 밝기를 증가

# 닫힘 연산의 특징
- 입력 영상에 대하여 동일한 구조 요소를 이용한 팽창과 침식을 수행
- 좁은 간극으로 분리되어 있던 두 객체가 해당 간극이 채워짐에 따라 연결됨
- 결과 영상에서의 객체의 크기(면적)가 유사하게 유지됨
- 구조 요소의 형태에 따라 작은 구멍이 채워질 수 있음
- 애플리케이션에 따라 동일한 객체 내에서 발생되는 모호한 연결을 강하게 만들거나 비선형적 조도 변화에 의해 발생되는 객체 내부의 구멍을 메우는 등의 분야에 응용 가능

# 명암도 영상에서의 팽창 연산
- 형태소와의 연산 결과(픽셀 단위 덧셈)로 얻은 값들 중에 최대값 선택
- 객체를 더 밝게 하여 객체를 더 크게 보이는 효과
- 밝기가 균일하지 않은 영역에서 효과적으로 처리됨

# 명암도 영상에서의 침식 연산
- 형태소와의 연산 결과(픽셀 단위 덧셈)로 얻은 값들 중에 최소값 선택
- 밝은 객체를 더 어둡게 보이도록 하여 축소하는 효과
- 밝기가 균일하지 않은 영역에서 효과적으로 처리됨

# 명암도 영상에서의 열림 연산
- 모든 밝은 특징들의 밝기가 감소
- 영상의 어두운 특징과 배경은 상대적으로 영향을 받지 X

# 명암도 영상에서의 닫힘 연산
- 어두운 특징 감소 === 밝아짐
- 영상의 밝은 디테일과 배경은 상대적으로 영향을 받지 X