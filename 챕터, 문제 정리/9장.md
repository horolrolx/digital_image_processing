# 영상 분석 기법
- k-mean 군집화 (K-mean clustering) 기법
- 영역 레이블링 (Region labeling) 기법
- 외곽선 추적 (Contour tracing) 기법

# K-means 군집화 기법
- 사전에 주어진 K개의 군집을 데이터의 특성에 맞도록 결정해 주는 방법을 말함
- 영상의 픽셀 정보를 이용하여 영상을 색상 별로 K개의 영역으로 분할하는 방법

## 교사 학습(supervised learning) - 지도학습
- 미리 학습 데이터를 클래스 별로 분류 시켜 놓고 분류 함수를 계산하여 새로운 데이터를 분류 함수에 따라 특정 클래스로 분류하는 방법

## 비 교사 분류 학습(unsupervised classification) - 비지도학습
- 미리 클래스를 분류 시켜놓지 않고 입력된 학습 데이터의 특성을 분석하여 특성이 비슷한 K개의 클래스로 분류하고, 새롭게 입력되는 테스트 데이터를 K개의 클래스 중의 하나로 분류하는 방법으로 군집화(clustering)라고도 부름

#### K-means 군집화에서는 초기 군집의 랜덤 중심값에도 영향을 받음
#### 수렴조건 T를 이용하여 반복 횟수를 조절하는데 수렴 조건 T가 큰 경우 수렴은 빨리 이루지는 반면 군집 결과는 상대적으로 나빠질 수 있으며, 반대로 T가 작거나 0일 경우 수렴 속도는 매우 느려지지만 군집 결과는 상대적으로 좋아 질 수 있음
#### 군집화 개수를 나타내는 K는 영상 안에 포함된 실제 영역의 개수가 아님

# 영역 레이블링(Region Labeling)
- 영역(혹은, connected component)이란 각 픽셀들이 서로 다른 픽셀들과 연결되어 있는 픽셀들의 집합을 의미하는 것으로, 영상을 스캔하여 픽셀 간의 연결성을 살펴보고 연결되어 있는 픽셀들을 같은 영역으로 그룹화 한 것을 말함
- 영역 레이블링 알고리즘은 픽셀들의 연결성을 체크하여 모든 연결된 영역을 찾고, 같은 영역에 해당하는 모든 픽셀에 각각 다른 레이블 값을 설정하는 방법을 의미함

## 반복적 알고리즘 (Recursive Alogorithm)
- 영상 안에 포함된 영역들은 1의 픽셀 값을 갖고 배경에 해당하는 영역들은 0의 값을 갖는다고 가정(반대로 생각해도 됨)
- 단계 1 : 영상을 위에서 아래로, 좌에서 우로 스캔하면서 레이블 되지 않은(1의 값을 가지고 있는) 픽셀을 찾으면 새로운 레이블 값 L을 할당
- 단계 2 : 반복적으로 픽셀 1의 이웃 픽셀들을 따라 다니며 L로 레이블하며 한 번 검사한 픽셀은 0으로 변화시켜 다시 체크하지 않도록 함
- 단계 3 : 연결되어 있는 모든 픽셀들을 레이블 했으면 (더 이상 연결되어 있는 1 픽셀이 없다면) 멈춤
- 단계 4 : 단계 1로 이동하여 새로운 영역에 대해 레이블링 함
- 단계 5 : 더 이상 1인 픽셀이 영상 안에 존재하지 않으면 레이블링을 모두 끝냄
- 주로 재귀 호출 함수를 통해 구현이 가능함
- 영상이 커질 경우 빈번한 재귀호출로 인해 stack overflow가 발생할 수 있음

## 전통적 레이블링(Traditional labeling) 기법
- 등가 테이블(equivalent table)을 만들면서 영상을 두 번 스캔(scan)함으로써 레이블링을 수행
- 첫번 째 스캔에서는 레이블을 전파시키면서 등가 테이블을 만들고, 두 번째 스캔에서는 등가 테이블을 참조하여 각 픽셀에 고유의 레이블을 부여
- 스캔 : 영상의 모든 픽셀을 위에서 아래로, 왼쪽에서 오른쪽 방향으로 방문하는 것

## 순차적 알고리즘 (Sequential Algorithm) - *
- 전체 영상에 대해 두 단계의 과정을 요구
- 영상에서 한 번에 두 개의 행(row)을 이용하여 레이블링을 진행함
- 현재 픽셀을 기준으로 4개의 이웃하는 점의 레이블을 고려하여 현재 자신의 레이블 값을 결정
- 실제로 현재 픽셀의 레이블을 결정하기 위해 참고하는 픽셀은 좌측(i) 픽셀과 위쪽(ii) 픽셀임
- 단계 1 : 영상을 좌측에서 우측으로, 위에서 아래로 스캔
- 단계 2 : 만약 현재 픽셀이 0이 아니면
- 단계 2-1 : 현재 픽셀의 위 또는 왼쪽 이웃 픽셀 중 하나만 레이블을 가졌다면 현재 픽셀은 레이블을 가진 픽셀과 같은 값으로 설정
- 단계 2-2 : 만약 두 픽셀 모두 같은 레이블을 가졌다면 해당 레이블로 설정
- 단계 2-3 : 만약 두 픽셀 모두 다른 레이블을 가졌다면, (1) 두 레이블 중에서 작은 번호의 레이블을 지정하고 (2) 두 레이블 중에서 큰 번호의 레이블이 작은 번호의 레이블을 가리키도록 등가 테이블(Equivalence Table)을 조정함
- 단계 3 : 등가 테이블의 번호와 레이블이 일치하지 않을 경우 등가 테이블을 수정함
- 단계 4 : 수정된 등가 테이블에 따라 레이블 영상을 수정함
- 단계 5 : 등가 테이블을 레이블이 순차적으로 증가하도록 재정렬함(선택적)
- 단계 6 : 정렬된 최종 등가 테이블에 맞게 레이블 영상을 최종 수정함

## 외곽선 추적 (Contour Tracing) 기법
- 영상이 영역 별로 레이블링 된 후에 각 영역에 대한 외곽선(region contour, boundary)을 추출할 수 있음
- 외곽선을 추출하기 위해 우선은 대상이 되는 외곽선들이 영역 S의 픽셀들이어야 함
- 다음으로 외곽선 추적(Contour tracing) 기법을 통해 레이블된 영역의 경계선을 따라 이동함

### 골격화
- 모양 정보 추출을 위해 선분(벡터) 형태를 추출
- 선분의 길이, 방향, 연결 관계 추출
- 연결 관계를 해치지 않는 범위 내에서 침식

### 체인 코드
- 선분 간의 연결 관계 표시
- 일정 길이의 벡터를 방향 정보의 연속으로 표현 (한 화소 단위)

#### Freeman 체인코드
- 화소단위 연결 관계 표현을 위해 8개(혹은 4개)의 방향 벡터를 코드 번호로 표현

#### 외곽선 추적 (Contour tracing)
- 객체의 외곽선을 따라 이동하는 기법
- 객체의 경계선 추적(boundary tracing)이라고도 함